<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Amount</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    ol, ul {
      list-style: none;
    }

    input {
      width: 180px;
    }

    .container {
      width: 414px;
      margin: 0 auto;
    }

    .input-item {
      margin: 15px 0;
    }

    .input-item > label {
      display: inline-block;
      width: 160px;
    }

    #input-min,
    #input-max {
      width: 80px;
    }

    .canvas-wrap {
      width: 100%;
      margin-top: 50px;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div class="container">
    <ul>
      <li class="input-item">
        <label>请输入总金额</label>：
        <input id="input-amount" type="text" />
      </li>
      <li class="input-item">
        <label>请输入单笔金额大小</label>：
        <input id="input-min" type="text" /> - <input id="input-max" type="text" />
      </li>
    </ul>

    <div class="canvas-wrap">
      <canvas id="amount-picture" />
    </div>
  </div>

  <script>
    var params = {
      amount: 0,
      minMoney: 0,
      maxMoney: 0,
    };
    var moneyList = [];
    var EleAmount = document.getElementById('input-amount');
    var EleMinMoney = document.getElementById('input-min');
    var EleMaxMoney = document.getElementById('input-max');
    var amountPicture = document.getElementById("amount-picture");
    var ctx = amountPicture.getContext("2d");
    var width = 414;
    amountPicture.width = width;
    var computed = function(e, key) {
      event = e || window.event;
      var value = Number(event.target.value);

      if (!value && value !== 0) return;

      params[key] = value;
      
      var amount = params.amount;
      var minMoney = params.minMoney;
      var maxMoney = params.maxMoney;

      if (!amount || !minMoney || !maxMoney) return;

      moneyList = [];

      while (amount > minMoney) {
        var singleAmount = Math.floor(Math.random() * (maxMoney - minMoney) + minMoney);
        amount -= singleAmount;
        moneyList.push(singleAmount);
      }

      moneyList.push(amount);

      amountPicture.height = moneyList.length * 45 + 45;
      ctx.font = '20px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('养卡周期金额', width / 2, 30);
      ctx.font = '14px Arial';
      ctx.textAlign = 'center';
      for (var i = 0; i < moneyList.length; i++) {
        var index = i + 1;
        ctx.fillText('第 ' + (index < 10 ? '0' + index : index) + ' 笔金额： ' + moneyList[i], width / 2, 45 * index);
      }
    };

    EleAmount.oninput = function(e) {
      computed(e, 'amount');
    };

    EleMinMoney.oninput = function(e) {
      computed(e, 'minMoney');
    };

    EleMaxMoney.oninput = function(e) {
      computed(e, 'maxMoney');
    };
  </script>
</body>
</html>